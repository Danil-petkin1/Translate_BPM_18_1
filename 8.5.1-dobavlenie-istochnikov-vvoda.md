# 8.5.1 Добавление источников ввода

Настройка контроллера yocs\_cmd\_vel на управление дополнительными источниками входных данных очень проста, так как все, что нам нужно сделать, это добавить соответствующий раздел в конфигурационный файл и запустить узел, который публикует новые входные сообщения. Например, следующая конфигурация включает в себя ввод для управления клавиатурным телеуправлением:

```text
subscribers:
- name: "Joystick control"
topic: "/joystick_cmd_vel"
 timeout: 0.2
priority: 2

- name: "Navigation stack"
topic: "/move_base_cmd_vel"
timeout: 0.2 priority: 1

- name: "Keyboard control"
topic: "/keyboard_cmd_vel"
 timeout: 1.0
priority: 0

publisher: "output/cmd_vel"
```

Здесь мы предполагаем, что узел keyboard teleop публикует команды Twist в теме `/keyboard_cmd_vel`. Мы также присвоили ей наименьший приоритет. Эту конфигурацию можно найти в файле `yocs_cmd_vel_with_keyboard.yaml` в каталоге `rbx2_nav/config`. Вы можете попробовать, завершив выполнение yocs\_cmd\_vel.launch из предыдущей секции, затем выполните следующие две команды:

```text
$ roslaunch rbx2_nav mux_keyboard_teleop.launch
$ roslaunch rbx2_nav yocs_cmd_vel_with_keyboard.launch
```

Выведите на передний план терминал keyboard teleop и попробуйте управлять фальшивым TurtleBot с помощью клавишных команд. Обратите внимание, что если вы установите 2D Nav Goal в RViz, вы можете переопределить движение робота джойстиком, но не клавиатурой. Это связано с тем, что мы дали джойстику более высокий приоритет, чем move\_base в конфигурационном файле yocs, но клавиатуре был дан более низкий приоритет.  


**ПРИМЕЧАНИЕ**: Большинство клавиатурных телеуправляемых узлов \(включая телеуправляемый узел TurtleBot, который мы используем в файле `mux_keyboard_teleop.launch`\) продолжают публиковать пустое сообщение `Twist`, даже когда все клавиши были освобождены. С одной стороны, это функция безопасности, так как это означает, что робот остановится, если пользователь не будет нажимать клавишу. С другой стороны, это не очень хорошо работает с узлом `yocs_cmd_vel`, так как если ввод с клавиатуры не будет сделан последним в списке приоритетов, то он всегда будет переопределять все остальные вводы, расположенные под ним.

