# 9.4.1 Реальные сервоприводы и искусственные мишени

Мы можем проверить работу сервоприводов, опубликовав придуманную нами 3D-мишень, которую мы использовали ранее, чтобы дать настоящей голове что-то, что можно отследить, даже если мишень будет находиться, так сказать, только в воображении робота. Во-первых, завершите работу файлов запуска, которые вы, возможно, уже запустили из предыдущих разделов.

Далее убедитесь, что ваши сервоприводы подключены и включены, затем запустите файл `pi_robot_head_only.launch` из пакета `rbx2_bringup`. Обратите внимание, что мы устанавливаем параметр `sim` в значение `false`, так как мы используем настоящего робота. В качестве альтернативы, если он у вас есть, используйте свой собственный стартовый файл:

```text
$ roslaunch rbx2_bringup pi_robot_head_only.launch sim:=false port:=/dev/ttyUSB0
```

Файл запуска предполагает, что контроллер `USB2Dynamixel` находится в `/dev/ttyUSB0`, но вы можете использовать параметр порта, как показано выше, для изменения порта, если ваш контроллер имеет другой USB ID, например, `/dev/ttyUSB1`. Если все пройдет хорошо, то в конечном итоге вы должны увидеть окно rqt\_robot\_monitor, отображающее состояние сервоприводов панорамирования и наклона в категории "Joints". Далее вызываем созданный нами узел мониторинга `Dynamixel` в главе "Diagnostics". Помните, что этот узел помогает предотвратить перегрев сервоприводов, отключая все сервоприводы, если температура одного из них превышает 60 градусов.

```text
$ roslaunch rbx2_diagnostics monitor_dynamixels.launch
```

Запустите RViz с помощью конфигурационного файла `fake_target.rviz`:

```text
$ rosrun rviz rviz -d `rospack find rbx2_utils`/fake_target.rviz
```

Теперь начните движение искусственной 3D-мишени:

```text
$ roslaunch rbx2_utils pub_3d_target.launch
```

Движущийся желтый "шар" должен появиться в `RViz`. Наконец, запустите узел головного трекера, но на этот раз с параметром `sim`, установленным в `false`:

```text
$ roslaunch rbx2_dynamixels head_tracker.launch sim:=false
```

Если все пройдет нормально, ваша наклонно-поворотная головка должна начать отслеживать воображаемый шар. В то же время, виртуальная голова робота в `RViz` должна отражать реальное движение сервопривода. Как и в предыдущей демонстрации, поднимите `rqt_reconfigure` и попробуйте изменить параметры движения цели:

```text
$ rosrun rqt_reconfigure rqt_reconfigure
```

Чтобы остановить отслеживание и центрировать сервоприводы, просто наберите `Ctrl-C` в окне терминала, которое вы использовали для запуска узла отслеживания головы.

